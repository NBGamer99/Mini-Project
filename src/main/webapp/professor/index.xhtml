<!DOCTYPE html>
<html
        lang="en"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
>

<f:metadata>
    <f:viewAction action="#{ProfessorCourseItemsListController.initialize()}"/>
    <f:viewAction
            action="#{LoginController.redirectToLoginIfNotLoggedIn(facesContext.getCurrentInstance().viewRoot.viewId)}"/>
</f:metadata>

<h:head>
    <meta charset="utf-8"/>
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />
    <title>Professor Dashboard</title>

    <!--    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5a8u5uG/KLrAGYbYlP0aBG5A9x1P1oWZZSEwFpo0oSMve6m" crossorigin="anonymous"/>-->

    <link rel="icon" type="image/x-icon" href="../../resources/img/favicon/favicon.ico"/>

    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com"/>
    <link
            href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&amp;display=swap"
            rel="stylesheet"
    />
    <!--    <link rel="stylesheet" href="../../resources/vendor/fonts/boxicons.css" />-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/boxicons/2.0.7/css/boxicons.min.css"/>

    <!--    <h:outputStylesheet name="vendor/fonts/boxicons.css" />-->
    <h:outputStylesheet name="vendor/css/core.css" class="template-customizer-core-css"/>
    <h:outputStylesheet name="vendor/css/theme-default.css" class="template-customizer-theme-css"/>
    <h:outputStylesheet name="css/demo.css"/>

    <h:outputStylesheet name="vendor/libs/perfect-scrollbar/perfect-scrollbar.css"/>

    <h:outputScript name="vendor/js/helpers.js"/>
    <h:outputScript name="js/config.js"/>
</h:head>

<h:body>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
        <div class="layout-container">
            <!-- Menu -->
            <ui:include src="../components/sidebar.xhtml"/>
            <!-- / Menu -->

            <!-- Layout container -->
            <h:panelGroup layout="block" styleClass="layout-page">
                <!-- Navbar -->
                <ui:include src="../components/navbar.xhtml"/>
                <!-- / Navbar -->

                <!-- Content wrapper -->
                <h:panelGroup layout="block" styleClass="content-wrapper">
                    <!-- Content -->

                    <div class="container-xxl flex-grow-1 container-p-y">
                        <h4 class="fw-bold py-3 mb-4"><span
                                class="text-muted fw-light">Students Notes /</span>#{ProfessorUserBean.selectedCourseItem.name}
                        </h4>

                        <!-- Striped Rows -->
                        <div class="card">
                            <!--                            <h5 class="card-header">Courses list</h5>-->


                            <div class="table-responsive text-nowrap">
                                <table class="table table-striped">
                                    <thead>
                                    <tr>
                                        <th>Student</th>
                                        <th>CC</th>
                                        <th>TP</th>
                                        <th>Project</th>
                                        <th>Presentatoin</th>
                                    </tr>
                                    </thead>
                                    <tbody class="table-border-bottom-0">
                                    <ui:fragment rendered="#{empty ProfessorUserBean.selectedCourseItem}">
                                        <tr class="text-center">
                                            <td colspan="6">Nothing to show</td>
                                        </tr>
                                    </ui:fragment>

                                    <h:form id="first">
                                        <div class="card-header d-flex align-items-center justify-content-between">
                                            <h5 class="mb-0">Students Notes List</h5>
                                            <div class="justify-content-end">

                                                <div class="float-end m-2 ">
                                                    <div class="col-sm-10">
                                                        <h:commandButton value="Clear Notes" class="btn btn-danger"
                                                                         action="#{ProfessorCourseItemsNotesController.clearStudentNotes()}"/>
                                                    </div>
                                                </div>
                                                <div class="float-end m-2">
                                                    <div class="col-sm-10 ">
                                                        <h:commandButton value="Save Temporarly Notes"
                                                                         class="btn btn-primary"/>
                                                    </div>
                                                </div>
                                                <div class="float-end m-2">
                                                    <div class="col-sm-10">
                                                        <h:commandButton value="Validate"
                                                                         class="btn btn-success"
                                                                         action="#{ProfessorCourseItemsNotesController.saveStudentNotes()}"/>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                        <ui:fragment rendered="#{not ProfessorUserBean.selectedCourseItem.validated}">

                                            <ui:repeat value="#{ProfessorUserBean.selectedCourseItemStudents}"
                                                       var="student"
                                                       varStatus="loop">
                                                <tr>
                                                    <td class="text-center">
                                                        <strong>#{student.FullName()}</strong>
                                                    </td>

                                                    <td>
                                                        Absent ?
                                                        <h:selectBooleanCheckbox
                                                                value="#{NotesBean.notesByCourseItem.get(ProfessorUserBean.selectedCourseItem.id).get(loop.index).absentCC}"/>
                                                        <h:inputText
                                                                value="#{NotesBean.notesByCourseItem.get(ProfessorUserBean.selectedCourseItem.id).get(loop.index).noteCC}"
                                                                class="form-control"
                                                                required="true"
                                                                id="coefficientCC"
                                                                label="Coefficient CC"
                                                                converterMessage="Coefficient must be a number"
                                                                requiredMessage="Coefficient is required"
                                                                validatorMessage="Value must be between 0 and 20"
                                                        >
                                                            <f:validateLongRange minimum="0" maximum="20"/>
                                                        </h:inputText>
                                                        <h:message for="coefficientCC" styleClass="text-danger"/>
                                                    </td>


                                                    <td>

                                                        Absent ?
                                                        <h:selectBooleanCheckbox
                                                                value="#{NotesBean.notesByCourseItem.get(ProfessorUserBean.selectedCourseItem.id).get(loop.index).absentTP}"/>
                                                        <h:inputText
                                                                value="#{NotesBean.notesByCourseItem.get(ProfessorUserBean.selectedCourseItem.id).get(loop.index).noteTP}"
                                                                class="form-control"
                                                                required="true"
                                                                id="coefficientTP"
                                                                label="Coefficient TP"
                                                                converterMessage="Coefficient must be a number"
                                                                requiredMessage="Coefficient is required"
                                                                validatorMessage="Value must be between 0 and 20"

                                                        >
                                                            <f:validateLongRange minimum="0" maximum="20"/>
                                                        </h:inputText>
                                                        <h:message for="coefficientTP" styleClass="text-danger"/>
                                                    </td>

                                                    <td>
                                                        Absent ?
                                                        <h:selectBooleanCheckbox
                                                                value="#{NotesBean.notesByCourseItem.get(ProfessorUserBean.selectedCourseItem.id).get(loop.index).absentProject}"/>
                                                        <h:inputText
                                                                value="#{NotesBean.notesByCourseItem.get(ProfessorUserBean.selectedCourseItem.id).get(loop.index).noteProject}"
                                                                class="form-control"
                                                                required="true"
                                                                id="CoefficientProject"
                                                                label="Coefficient Project"
                                                                converterMessage="Coefficient must be a number"
                                                                requiredMessage="Coefficient is required"
                                                                validatorMessage="Value must be between 0 and 20"

                                                        >
                                                            <f:validateLongRange minimum="0" maximum="20"/>

                                                        </h:inputText>
                                                        <h:message for="CoefficientProject" styleClass="text-danger"/>
                                                    </td>

                                                    <td>
                                                        Absent ?
                                                        <h:selectBooleanCheckbox
                                                                value="#{NotesBean.notesByCourseItem.get(ProfessorUserBean.selectedCourseItem.id).get(loop.index).absentPresentation}"/>
                                                        <h:inputText
                                                                value="#{NotesBean.notesByCourseItem.get(ProfessorUserBean.selectedCourseItem.id).get(loop.index).notePresentation}"
                                                                class="form-control"
                                                                required="true"
                                                                id="coefficientPresentation"
                                                                label="Coefficient Presentation"
                                                                converterMessage="Coefficient must be a number"
                                                                requiredMessage="Coefficient is required"
                                                                validatorMessage="Value must be between 0 and 20"

                                                        >
                                                            <f:validateLongRange minimum="0" maximum="20"/>

                                                        </h:inputText>
                                                        <h:message for="coefficientPresentation"
                                                                   styleClass="text-danger"/>
                                                    </td>
                                                </tr>
                                            </ui:repeat>
                                        </ui:fragment>

                                        <ui:fragment rendered="#{ProfessorUserBean.selectedCourseItem.validated}">


                                            <ui:repeat value="#{ProfessorUserBean.selectedCourseItemStudents}"
                                                       var="student"
                                                       varStatus="loop">
                                                <tr>
                                                    <td class="text-center">
                                                        <strong>#{student.FullName()}</strong>
                                                    </td>

                                                    <td>
                                                        Absent ?
                                                        <h:selectBooleanCheckbox
                                                                disabled="true"
                                                                value="#{NotesBean.notesByCourseItem.get(ProfessorUserBean.selectedCourseItem.id).get(loop.index).absentCC}"/>
                                                        <h:inputText
                                                                value="#{NotesBean.notesByCourseItem.get(ProfessorUserBean.selectedCourseItem.id).get(loop.index).noteCC}"
                                                                class="form-control"
                                                                required="true"
                                                                disabled="true"
                                                                label="Coefficient CC"
                                                                converterMessage="Coefficient must be a number"
                                                                requiredMessage="Coefficient is required"
                                                                validatorMessage="Value must be between 0 and 20"
                                                        >
                                                            <f:validateLongRange minimum="0" maximum="20"/>
                                                        </h:inputText>
                                                        <h:message for="coefficientCC" styleClass="text-danger"/>
                                                    </td>


                                                    <td>

                                                        Absent ?
                                                        <h:selectBooleanCheckbox
                                                                disabled="true"
                                                                value="#{NotesBean.notesByCourseItem.get(ProfessorUserBean.selectedCourseItem.id).get(loop.index).absentTP}"/>
                                                        <h:inputText
                                                                value="#{NotesBean.notesByCourseItem.get(ProfessorUserBean.selectedCourseItem.id).get(loop.index).noteTP}"
                                                                class="form-control"
                                                                required="true"
                                                                disabled="true" label="Coefficient TP"
                                                                converterMessage="Coefficient must be a number"
                                                                requiredMessage="Coefficient is required"
                                                                validatorMessage="Value must be between 0 and 20"

                                                        >
                                                            <f:validateLongRange minimum="0" maximum="20"/>
                                                        </h:inputText>
                                                        <h:message for="coefficientTP" styleClass="text-danger"/>
                                                    </td>

                                                    <td>
                                                        Absent ?
                                                        <h:selectBooleanCheckbox
                                                                disabled="true"
                                                                value="#{NotesBean.notesByCourseItem.get(ProfessorUserBean.selectedCourseItem.id).get(loop.index).absentProject}"/>
                                                        <h:inputText
                                                                value="#{NotesBean.notesByCourseItem.get(ProfessorUserBean.selectedCourseItem.id).get(loop.index).noteProject}"
                                                                class="form-control"
                                                                required="true"
                                                                disabled="true" label="Coefficient Project"
                                                                converterMessage="Coefficient must be a number"
                                                                requiredMessage="Coefficient is required"
                                                                validatorMessage="Value must be between 0 and 20"

                                                        >
                                                            <f:validateLongRange minimum="0" maximum="20"/>

                                                        </h:inputText>
                                                        <h:message for="CoefficientProject" styleClass="text-danger"/>
                                                    </td>

                                                    <td>
                                                        Absent ?
                                                        <h:selectBooleanCheckbox
                                                                disabled="true"
                                                                value="#{NotesBean.notesByCourseItem.get(ProfessorUserBean.selectedCourseItem.id).get(loop.index).absentPresentation}"/>
                                                        <h:inputText
                                                                value="#{NotesBean.notesByCourseItem.get(ProfessorUserBean.selectedCourseItem.id).get(loop.index).notePresentation}"
                                                                class="form-control"
                                                                required="true"
                                                                disabled="true"
                                                                label="Coefficient Presentation"
                                                                converterMessage="Coefficient must be a number"
                                                                requiredMessage="Coefficient is required"
                                                                validatorMessage="Value must be between 0 and 20"

                                                        >
                                                            <f:validateLongRange minimum="0" maximum="20"/>

                                                        </h:inputText>
                                                        <h:message for="coefficientPresentation"
                                                                   styleClass="text-danger"/>
                                                    </td>
                                                </tr>
                                            </ui:repeat>
                                        </ui:fragment>


                                    </h:form>


                                    </tbody>
                                </table>
                            </div>

                        </div>


                        <hr class="my-5"/>

                        <!--/ Responsive Table -->
                    </div>
                    <!-- / Content -->

                    <!-- Footer -->
                    <ui:include src="../components/footer.xhtml"/>
                    <!-- / Footer -->

                    <div class="content-backdrop fade"></div>
                </h:panelGroup>
                <!-- Content wrapper -->
            </h:panelGroup>
            <!-- / Layout page -->
        </div>

        <!-- Overlay -->
        <div class="layout-overlay layout-menu-toggle"></div>
    </div>
    <!-- / Layout wrapper -->

    <!-- Core JS -->
    <!-- build:js assets/vendor/js/core.js -->
    <h:outputScript name="vendor/libs/jquery/jquery.js"/>
    <h:outputScript name="vendor/libs/popper/popper.js"/>
    <h:outputScript name="vendor/js/bootstrap.js"/>
    <h:outputScript name="vendor/libs/perfect-scrollbar/perfect-scrollbar.js"/>
    <h:outputScript name="vendor/js/menu.js"/>
    <!-- endbuild -->

    <!-- Vendors JS -->

    <!-- Main JS -->
    <h:outputScript name="js/main.js"/>

    <!-- Page JS -->

    <!-- Place this tag in your head or just before your close body tag. -->
    <!--    <h:outputScript async defer src="https://buttons.github.io/buttons.js"></h:outputScript>-->
</h:body>
</html>
